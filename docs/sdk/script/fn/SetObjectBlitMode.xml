<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE funcs
  SYSTEM '../../../clonk.dtd'>
<?xml-stylesheet type="text/xsl" href="../../../clonk.xsl"?>
<funcs>
  <func>
    <title>SetObjectBlitMode</title>
    <category>Objects</category>
    <subcat>Display</subcat>
    <version>4.9.5.0 CE<extversion>4.9.6.0 CR</extversion></version>
    <syntax>
      <rtype>int</rtype>
      <params>
        <param>
          <type>int</type>
          <name>dwNewBlitMod</name>
          <desc>New drawing mode (values see below). If 0 the object is reset to its definition blit mode. Otherwise bit 8 (user defined color value) is set implicitly.</desc>
          <optional />
        </param>
        <param>
          <type>int</type>
          <name>overlay_id</name>
          <desc>If specified, this will change the blit mode of the graphics overlay instead. The overlay must have been created using <funclink>SetGraphics</funclink> first. From CR.</desc>
          <optional />
        </param>
      </params>
    </syntax>
    <desc>Changes the drawing mode of the object. The possible values correspond to the BlitMode value in the DefCore (see notice). This function returns the previously set blit mode.</desc>
    <remark>The blit mode does not affect additional overlay graphics. The blit mode of those must be set using <funclink>SetGraphics</funclink>.</remark>
    <remark>
      <table>
        <rowh>
          <col>Constant</col>
          <col>Value</col>
          <col>Meaning</col>
        </rowh>
        <row>
          <col>GFX_BLIT_Additive</col>
          <col>1</col>
          <col>Additive (always base surface and overlay)</col>
        </row>
        <row>
          <col>GFX_BLIT_Mod2</col>
          <col>2</col>
          <col>Additive Modulation: the color of the modulation value is added to the object color, then RGB(128,128,128) is subtracted. Only base surface.</col>
        </row>
        <row>
          <col>GFX_BLIT_ClrSfc_OwnClr</col>
          <col>4</col>
          <col>The color modulation set via <funclink>SetClrModulation</funclink>() applies to the base surface only and the overlay is normally colored by the owner color (see <funclink>SetColorDw</funclink>()).</col>
        </row>
        <row>
          <col>GFX_BLIT_ClrSfc_Mod2</col>
          <col>8</col>
          <col>The overlay (owner color) is drawn using additive modulation. This flag might have to be set independently of bit 2.</col>
        </row>
        <row>
          <col>5-7</col>
          <col>16, 32, 64</col>
          <col>reserved</col>
        </row>
        <row>
          <col>GFX_BLIT_Custom</col>
          <col>128</col>
          <col>User defined color value. This value can be specified if no special color mode is desired and to overwrite a DefCore setting. Also, this bit is set in the return value of this function and <funclink>GetObjectBlitMode</funclink> if the current blit mode of the object does not correspond to the definition blit mode.</col>
        </row>
        <row>
          <col>GFX_BLIT_Parent</col>
          <col>256</col>
          <col>Only for overlays: the blit mode of the base surface is used when drawing this overlay. From CR.</col>
        </row>
      </table>
    </remark>
    <examples>
      <example>
        <code>static g_pCursor, g_dwPrevBlitMode, g_dwPrevMod;

protected func Script100()
  {
  // Ausgew채hlten Clonk des ersten Spielers ermitteln
  g_pCursor = <funclink>GetCursor</funclink>();
  // Vorherige Werte speichern
  g_dwPrevBlitMode = g_pCursor-&gt;<funclink>GetObjectBlitMode</funclink>();
  g_dwPrevMod = g_pCursor-&gt;<funclink>GetClrModulation</funclink>();
  // Nicht-ColorByOwner-Teile des Clonks leuchtend gr체n f채rben
  g_pCursor-&gt;SetObjectBlitMode(6);
  g_pCursor-&gt;<funclink>SetClrModulation</funclink>(<funclink>RGB</funclink>(100, 255, 110));
  // Nachricht
  g_pCursor-&gt;<funclink>Message</funclink>(&quot;Schau her, ich kann leuchten!&quot;);
  return true;
  }

protected func Script200()
  {
  // Farbe zur체cksetzen
  g_pCursor-&gt;SetObjectBlitMode(g_dwPrevBlitMode);
  g_pCursor-&gt;<funclink>SetClrModulation</funclink>(g_dwPrevMod);
  // Nachricht
  g_pCursor-&gt;<funclink>Message</funclink>(&quot;Schon vorbei :/&quot;);
  <funclink>return</funclink> 1;
  }</code>
        <text>Part of a scenario script: colors the selected clonk of the first player bright green for a while.<br/>To handle the timing properly, it would be better to use an <emlink href="script/Effects.html">effect</emlink> in order to avoid conflicts with other scripts that might change the color at the same time.</text>
      </example>
    </examples>
    <related>
      <funclink>SetClrModulation</funclink>
      <funclink>GetObjectBlitMode</funclink>
    </related>
  </func>
  <author>Sven2</author><date>2004-03</date>
</funcs>
